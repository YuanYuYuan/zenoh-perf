# Performance Comparison of Zenoh, MQTT, Kafka, and DDS

## Protocols to Compare

- [Eclipse Zenoh](./zenoh)
- [Eclipse CycloneDDS](./cyclonedds)
- [Eclipse MQTT](./mqtt)
- [Apache Kafka](./kafka)

## Numerical Results

<details>
  <summary>Single-machine Throughput (msg/s)</summary>

  | Payload size   | CycloneDDS       | Kafka          | MQTT           | Zenoh P2P       | Zenoh brokered   |
  |:---------------|:-----------------|:---------------|:---------------|:----------------|:-----------------|
  | 8 B            | 2.3 M ± 1.2 K    | 61.6 K ± 724.5 | 34.2 K ± 1.0 K | 4.3 M ± 7.4 K   | 3.0 M ± 28.3 K   |
  | 16 B           | 2.5 M ± 3.1 K    | 62.5 K ± 1.3 K | 34.1 K ± 1.9 K | 4.2 M ± 2.2 K   | 2.9 M ± 16.4 K   |
  | 32 B           | 2.3 M ± 7.7 K    | 61.1 K ± 1.2 K | 34.2 K ± 292.1 | 4.2 M ± 4.4 K   | 2.9 M ± 28.3 K   |
  | 64 B           | 2.1 M ± 5.4 K    | 61.6 K ± 618.0 | 35.1 K ± 185.1 | 4.1 M ± 2.8 K   | 2.8 M ± 42.0 K   |
  | 128 B          | 1.9 M ± 68.1 K   | 59.4 K ± 809.5 | 34.8 K ± 1.8 K | 3.9 M ± 7.4 K   | 2.6 M ± 61.5 K   |
  | 256 B          | 1.8 M ± 3.3 K    | 58.7 K ± 1.2 K | 33.9 K ± 1.1 K | 3.8 M ± 23.3 K  | 2.4 M ± 68.7 K   |
  | 512 B          | 1.5 M ± 85.9 K   | 57.1 K ± 1.7 K | 34.1 K ± 661.1 | 3.5 M ± 2.2 K   | 2.1 M ± 68.5 K   |
  | 1 KiB          | 1.3 M ± 4.5 K    | 57.3 K ± 1.6 K | 37.9 K ± 401.9 | 3.1 M ± 7.1 K   | 1.7 M ± 69.6 K   |
  | 2 KiB          | 895.5 K ± 2.0 K  | 53.2 K ± 2.0 K | 37.7 K ± 236.1 | 2.5 M ± 3.8 K   | 1.4 M ± 55.8 K   |
  | 4 KiB          | 546.4 K ± 12.7 K | 47.6 K ± 1.5 K | 38.1 K ± 396.0 | 1.8 M ± 45.5 K  | 846.6 K ± 25.1 K |
  | 8 KiB          | 246.2 K ± 700.7  | 40.9 K ± 832.5 | 36.3 K ± 103.8 | 1.0 M ± 7.0 K   | 560.1 K ± 24.7 K |
  | 16 KiB         | 127.1 K ± 693.1  | 32.1 K ± 474.7 | 36.7 K ± 311.1 | 452.0 K ± 7.5 K | 276.3 K ± 8.3 K  |
  | 32 KiB         | 88.2 K ± 559.0   | 13.8 K ± 3.3 K | 29.1 K ± 9.9 K | 190.6 K ± 2.9 K | 130.4 K ± 2.9 K  |
  | 64 KiB         | 48.1 K ± 1.0 K   | 6.9 K ± 785.6  | 423.9  ± 24.8  | 83.8 K ± 1.2 K  | 63.9 K ± 2.9 K   |
  | 128 KiB        | 22.5 K ± 439.4   | 3.2 K ± 244.2  | 170.8  ± 8.0   | 46.6 K ± 1.1 K  | 37.7 K ± 1.5 K   |
  | 256 KiB        | 12.3 K ± 33.5    | 1.7 K ± 114.6  | 155.0  ± 13.4  | 24.3 K ± 291.0  | 18.9 K ± 903.2   |
  | 512 KiB        | 5.6 K ± 16.6     | 800.9  ± 108.6 | 149.4  ± 11.5  | 12.3 K ± 112.0  | 8.5 K ± 276.9    |
  | 1 MiB          | 2.1 K ± 2.8      | N/A            | 72.5  ± 8.3    | 6.3 K ± 139.2   | 4.0 K ± 66.3     |
  | 2 MiB          | 1.2 K ± 3.2      | N/A            | 43.0  ± 1.3    | 3.3 K ± 29.3    | 1.9 K ± 53.1     |
  | 4 MiB          | 606.4  ± 0.7     | N/A            | 23.5  ± 0.5    | 1.5 K ± 24.7    | 890.7  ± 14.2    |
  | 8 MiB          | 293.5  ± 0.7     | N/A            | 7.9  ± 1.1     | 676.7  ± 1.2    | 361.1  ± 3.7     |
  | 16 MiB         | 130.9  ± 2.6     | N/A            | 3.9  ± 0.4     | 377.1  ± 16.2   | 173.8  ± 2.7     |
  | 32 MiB         | 33.9  ± 0.5      | N/A            | 2.3  ± 0.8     | 223.8  ± 13.2   | 90.9  ± 4.1      |
  | 64 MiB         | 17.4  ± 0.6      | N/A            | 0.9  ± 0.2     | 96.9  ± 2.0     | 49.1  ± 1.6      |
  | 128 MiB        | 11.2  ± 0.4      | N/A            | N/A            | 42.1  ± 1.3     | 21.6  ± 0.8      |
  | 256 MiB        | 5.7  ± 0.5       | N/A            | N/A            | 20.9  ± 0.6     | 11.2  ± 0.8      |
  | 512 MiB        | 2.9  ± 0.3       | N/A            | N/A            | 12.9  ± 0.8     | 6.0  ± 0.5       |

</details>

<details>
  <summary>Single-machine Throughput (bps)</summary>

  | Payload size   | CycloneDDS        | Kafka            | MQTT              | Zenoh P2P         | Zenoh brokered   |
  |:---------------|:------------------|:-----------------|:------------------|:------------------|:-----------------|
  | 8 B            | 147.0 M ± 76.3 K  | 3.9 M ± 46.4 K   | 2.2 M ± 67.1 K    | 274.2 M ± 475.0 K | 189.4 M ± 1.8 M  |
  | 16 B           | 318.6 M ± 396.4 K | 8.0 M ± 164.5 K  | 4.4 M ± 244.2 K   | 537.5 M ± 275.4 K | 373.9 M ± 2.1 M  |
  | 32 B           | 598.0 M ± 2.0 M   | 15.6 M ± 308.2 K | 8.8 M ± 74.8 K    | 1.1 G ± 1.1 M     | 734.2 M ± 7.2 M  |
  | 64 B           | 1.1 G ± 2.8 M     | 31.5 M ± 316.4 K | 18.0 M ± 94.8 K   | 2.1 G ± 1.4 M     | 1.4 G ± 21.5 M   |
  | 128 B          | 1.9 G ± 69.7 M    | 60.8 M ± 828.9 K | 35.6 M ± 1.9 M    | 4.0 G ± 7.6 M     | 2.7 G ± 63.0 M   |
  | 256 B          | 3.6 G ± 6.9 M     | 120.3 M ± 2.5 M  | 69.4 M ± 2.3 M    | 7.8 G ± 47.6 M    | 4.9 G ± 140.6 M  |
  | 512 B          | 6.2 G ± 351.9 M   | 233.9 M ± 7.0 M  | 139.6 M ± 2.7 M   | 14.5 G ± 9.0 M    | 8.7 G ± 280.7 M  |
  | 1 KiB          | 10.3 G ± 36.5 M   | 469.7 M ± 13.0 M | 310.5 M ± 3.3 M   | 25.2 G ± 58.5 M   | 14.2 G ± 570.4 M |
  | 2 KiB          | 14.7 G ± 33.4 M   | 871.7 M ± 32.9 M | 617.1 M ± 3.9 M   | 40.6 G ± 61.5 M   | 23.0 G ± 913.8 M |
  | 4 KiB          | 17.9 G ± 414.8 M  | 1.6 G ± 50.7 M   | 1.2 G ± 13.0 M    | 59.2 G ± 1.5 G    | 27.7 G ± 823.7 M |
  | 8 KiB          | 16.1 G ± 45.9 M   | 2.7 G ± 54.6 M   | 2.4 G ± 6.8 M     | 67.0 G ± 458.0 M  | 36.7 G ± 1.6 G   |
  | 16 KiB         | 16.7 G ± 90.8 M   | 4.2 G ± 62.2 M   | 4.8 G ± 40.8 M    | 59.2 G ± 979.9 M  | 36.2 G ± 1.1 G   |
  | 32 KiB         | 23.1 G ± 146.5 M  | 3.6 G ± 876.3 M  | 7.6 G ± 2.6 G     | 50.0 G ± 771.9 M  | 34.2 G ± 752.6 M |
  | 64 KiB         | 25.2 G ± 535.0 M  | 3.6 G ± 411.9 M  | 222.2 M ± 13.0 M  | 44.0 G ± 620.8 M  | 33.5 G ± 1.5 G   |
  | 128 KiB        | 23.6 G ± 460.7 M  | 3.3 G ± 256.1 M  | 179.1 M ± 8.4 M   | 48.9 G ± 1.1 G    | 39.5 G ± 1.5 G   |
  | 256 KiB        | 25.8 G ± 70.2 M   | 3.5 G ± 240.4 M  | 325.0 M ± 28.1 M  | 51.0 G ± 610.3 M  | 39.7 G ± 1.9 G   |
  | 512 KiB        | 23.6 G ± 69.7 M   | 3.4 G ± 455.4 M  | 626.5 M ± 48.2 M  | 51.5 G ± 469.8 M  | 35.8 G ± 1.2 G   |
  | 1 MiB          | 17.9 G ± 23.7 M   | N/A              | 608.1 M ± 69.6 M  | 53.2 G ± 1.2 G    | 33.3 G ± 556.1 M |
  | 2 MiB          | 20.2 G ± 53.2 M   | N/A              | 721.4 M ± 21.7 M  | 55.1 G ± 491.0 M  | 31.5 G ± 890.6 M |
  | 4 MiB          | 20.3 G ± 23.1 M   | N/A              | 788.5 M ± 17.9 M  | 49.2 G ± 827.7 M  | 29.9 G ± 475.7 M |
  | 8 MiB          | 19.7 G ± 49.1 M   | N/A              | 528.4 M ± 75.5 M  | 45.4 G ± 82.6 M   | 24.2 G ± 250.3 M |
  | 16 MiB         | 17.6 G ± 345.3 M  | N/A              | 520.1 M ± 47.5 M  | 50.6 G ± 2.2 G    | 23.3 G ± 357.7 M |
  | 32 MiB         | 9.1 G ± 125.7 M   | N/A              | 613.6 M ± 202.9 M | 60.1 G ± 3.5 G    | 24.4 G ± 1.1 G   |
  | 64 MiB         | 9.3 G ± 321.6 M   | N/A              | 492.1 M ± 109.6 M | 52.0 G ± 1.1 G    | 26.3 G ± 876.2 M |
  | 128 MiB        | 12.0 G ± 448.1 M  | N/A              | N/A               | 45.2 G ± 1.4 G    | 23.2 G ± 856.8 M |
  | 256 MiB        | 12.2 G ± 1.0 G    | N/A              | N/A               | 45.0 G ± 1.3 G    | 24.1 G ± 1.6 G   |
  | 512 MiB        | 12.4 G ± 1.4 G    | N/A              | N/A               | 55.5 G ± 3.4 G    | 25.7 G ± 2.1 G   |

</details>


<details>
  <summary>Muti-machine Throughput (msg/s)</summary>

  | Payload size   | CycloneDDS       | Kafka          | MQTT           | Zenoh P2P        | Zenoh brokered   |
  |:---------------|:-----------------|:---------------|:---------------|:-----------------|:-----------------|
  | 8 B            | 2.1 M ± 5.8 K    | 67.4 K ± 959.3 | 32.7 K ± 1.1 K | 4.1 M ± 8.6 K    | 3.0 M ± 9.6 K    |
  | 16 B           | 2.1 M ± 3.8 K    | 72.3 K ± 782.2 | 34.3 K ± 636.1 | 4.2 M ± 2.5 K    | 2.9 M ± 3.1 K    |
  | 32 B           | 2.1 M ± 8.0 K    | 73.6 K ± 1.2 K | 33.8 K ± 2.1 K | 4.0 M ± 8.1 K    | 2.9 M ± 18.8 K   |
  | 64 B           | 1.8 M ± 6.0 K    | 72.3 K ± 1.2 K | 34.3 K ± 274.4 | 3.9 M ± 123.0 K  | 2.8 M ± 21.5 K   |
  | 128 B          | 1.6 M ± 26.4 K   | 70.7 K ± 757.6 | 34.4 K ± 485.6 | 3.8 M ± 15.0 K   | 2.5 M ± 2.4 K    |
  | 256 B          | 1.4 M ± 19.5 K   | 63.8 K ± 1.2 K | 35.0 K ± 400.0 | 3.5 M ± 10.2 K   | 2.3 M ± 21.4 K   |
  | 512 B          | 1.1 M ± 15.3 K   | 63.3 K ± 1.6 K | 33.5 K ± 654.2 | 3.1 M ± 10.3 K   | 2.0 M ± 25.1 K   |
  | 1 KiB          | 860.1 K ± 17.1 K | 58.5 K ± 1.6 K | 34.7 K ± 2.4 K | 2.4 M ± 29.4 K   | 1.3 M ± 78.7 K   |
  | 2 KiB          | 579.6 K ± 5.5 K  | 58.5 K ± 1.8 K | 36.6 K ± 1.5 K | 1.7 M ± 2.7 K    | 1.1 M ± 97.0 K   |
  | 4 KiB          | 338.4 K ± 4.7 K  | 49.7 K ± 2.1 K | 36.0 K ± 340.2 | 1.1 M ± 1.3 K    | 745.1 K ± 16.2 K |
  | 8 KiB          | 194.6 K ± 2.5 K  | 43.9 K ± 2.4 K | 34.0 K ± 201.3 | 463.4 K ± 13.8 K | 404.3 K ± 21.6 K |
  | 16 KiB         | 102.0 K ± 878.8  | 33.5 K ± 2.3 K | 35.1 K ± 554.7 | 349.6 K ± 3.4 K  | 206.3 K ± 712.8  |
  | 32 KiB         | 53.0 K ± 554.5   | 17.5 K ± 4.3 K | 32.7 K ± 425.1 | 155.3 K ± 5.6 K  | 91.4 K ± 1.3 K   |
  | 64 KiB         | 27.5 K ± 457.0   | 7.2 K ± 2.0 K  | 257.6  ± 123.1 | 79.9 K ± 100.3   | 51.8 K ± 1.2 K   |
  | 128 KiB        | 12.8 K ± 153.4   | 3.3 K ± 572.3  | 70.4  ± 60.5   | 42.3 K ± 938.9   | 32.8 K ± 430.8   |
  | 256 KiB        | 6.7 K ± 88.6     | 1.8 K ± 408.3  | 29.6  ± 33.0   | 22.8 K ± 286.4   | 15.8 K ± 825.7   |
  | 512 KiB        | 3.4 K ± 49.6     | 998.2  ± 290.4 | 6.9  ± 7.5     | 11.7 K ± 148.6   | 7.0 K ± 116.7    |
  | 1 MiB          | 1.4 K ± 33.5     | N/A            | 7.0  ± 8.4     | 6.0 K ± 78.3     | 3.6 K ± 42.8     |
  | 2 MiB          | 745.9  ± 7.7     | N/A            | 3.9  ± 3.1     | 2.5 K ± 451.4    | 1.9 K ± 69.7     |
  | 4 MiB          | 373.7  ± 3.8     | N/A            | 0.8  ± 0.3     | 1.0 K ± 187.4    | 919.9  ± 7.6     |
  | 8 MiB          | 191.2  ± 2.0     | N/A            | 0.8  ± 0.4     | 707.3  ± 15.9    | 405.4  ± 3.6     |
  | 16 MiB         | 92.9  ± 0.8      | N/A            | 0.9  ± 0.2     | 272.6  ± 23.3    | 193.0  ± 1.7     |
  | 32 MiB         | 27.4  ± 0.5      | N/A            | N/A            | 139.8  ± 3.6     | 77.7  ± 5.6      |
  | 64 MiB         | 13.9  ± 0.3      | N/A            | 0.2  ± 0.0     | 67.8  ± 0.4      | 36.2  ± 0.9      |
  | 128 MiB        | 9.2  ± 0.4       | N/A            | N/A            | 36.3  ± 0.6      | 18.5  ± 0.5      |
  | 256 MiB        | 4.6  ± 0.5       | N/A            | N/A            | 17.1  ± 0.3      | 8.3  ± 0.7       |
  | 512 MiB        | 2.3  ± 0.5       | N/A            | N/A            | 8.6  ± 0.5       | 4.1  ± 0.5       |

</details>


<details>
  <summary>Muti-machine Throughput (bps)</summary>

  | Payload size   | CycloneDDS        | Kafka            | MQTT             | Zenoh P2P         | Zenoh brokered    |
  |:---------------|:------------------|:-----------------|:-----------------|:------------------|:------------------|
  | 8 B            | 136.6 M ± 371.2 K | 4.3 M ± 61.4 K   | 2.1 M ± 68.0 K   | 264.1 M ± 548.2 K | 192.4 M ± 617.1 K |
  | 16 B           | 267.8 M ± 482.7 K | 9.3 M ± 100.1 K  | 4.4 M ± 81.4 K   | 541.5 M ± 320.6 K | 374.9 M ± 399.6 K |
  | 32 B           | 527.9 M ± 2.0 M   | 18.9 M ± 305.6 K | 8.7 M ± 539.2 K  | 1.0 G ± 2.1 M     | 735.7 M ± 4.8 M   |
  | 64 B           | 937.8 M ± 3.1 M   | 37.0 M ± 595.8 K | 17.5 M ± 140.5 K | 2.0 G ± 63.0 M    | 1.4 G ± 11.0 M    |
  | 128 B          | 1.6 G ± 27.0 M    | 72.4 M ± 775.8 K | 35.3 M ± 497.2 K | 3.9 G ± 15.3 M    | 2.6 G ± 2.5 M     |
  | 256 B          | 2.9 G ± 39.9 M    | 130.7 M ± 2.4 M  | 71.7 M ± 819.2 K | 7.2 G ± 20.9 M    | 4.8 G ± 43.8 M    |
  | 512 B          | 4.6 G ± 62.6 M    | 259.2 M ± 6.5 M  | 137.2 M ± 2.7 M  | 12.5 G ± 42.2 M   | 8.4 G ± 102.8 M   |
  | 1 KiB          | 7.0 G ± 140.1 M   | 479.5 M ± 13.5 M | 284.1 M ± 19.5 M | 20.1 G ± 241.1 M  | 11.0 G ± 645.0 M  |
  | 2 KiB          | 9.5 G ± 90.3 M    | 959.0 M ± 29.0 M | 599.2 M ± 24.5 M | 28.0 G ± 45.0 M   | 17.5 G ± 1.6 G    |
  | 4 KiB          | 11.1 G ± 153.1 M  | 1.6 G ± 67.5 M   | 1.2 G ± 11.1 M   | 36.9 G ± 41.1 M   | 24.4 G ± 531.0 M  |
  | 8 KiB          | 12.8 G ± 166.5 M  | 2.9 G ± 155.7 M  | 2.2 G ± 13.2 M   | 30.4 G ± 902.2 M  | 26.5 G ± 1.4 G    |
  | 16 KiB         | 13.4 G ± 115.2 M  | 4.4 G ± 302.4 M  | 4.6 G ± 72.7 M   | 45.8 G ± 443.8 M  | 27.0 G ± 93.4 M   |
  | 32 KiB         | 13.9 G ± 145.4 M  | 4.6 G ± 1.1 G    | 8.6 G ± 111.4 M  | 40.7 G ± 1.5 G    | 24.0 G ± 343.5 M  |
  | 64 KiB         | 14.4 G ± 239.6 M  | 3.8 G ± 1.1 G    | 135.1 M ± 64.5 M | 41.9 G ± 52.6 M   | 27.1 G ± 620.8 M  |
  | 128 KiB        | 13.4 G ± 160.9 M  | 3.5 G ± 600.1 M  | 73.8 M ± 63.4 M  | 44.4 G ± 984.5 M  | 34.4 G ± 451.7 M  |
  | 256 KiB        | 14.1 G ± 185.9 M  | 3.8 G ± 856.3 M  | 62.1 M ± 69.1 M  | 47.8 G ± 600.6 M  | 33.0 G ± 1.7 G    |
  | 512 KiB        | 14.3 G ± 208.0 M  | 4.2 G ± 1.2 G    | 28.8 M ± 31.5 M  | 49.0 G ± 623.4 M  | 29.5 G ± 489.5 M  |
  | 1 MiB          | 12.1 G ± 281.3 M  | N/A              | 58.7 M ± 70.9 M  | 50.5 G ± 656.5 M  | 29.9 G ± 359.1 M  |
  | 2 MiB          | 12.5 G ± 129.4 M  | N/A              | 65.0 M ± 52.6 M  | 41.3 G ± 7.6 G    | 31.3 G ± 1.2 G    |
  | 4 MiB          | 12.5 G ± 126.0 M  | N/A              | 28.0 M ± 9.7 M   | 34.4 G ± 6.3 G    | 30.9 G ± 254.2 M  |
  | 8 MiB          | 12.8 G ± 132.8 M  | N/A              | 50.3 M ± 23.7 M  | 47.5 G ± 1.1 G    | 27.2 G ± 238.6 M  |
  | 16 MiB         | 12.5 G ± 113.9 M  | N/A              | 117.4 M ± 33.6 M | 36.6 G ± 3.1 G    | 25.9 G ± 231.4 M  |
  | 32 MiB         | 7.4 G ± 133.6 M   | N/A              | N/A              | 37.5 G ± 975.0 M  | 20.9 G ± 1.5 G    |
  | 64 MiB         | 7.4 G ± 186.1 M   | N/A              | 120.8 M ± 19.0 M | 36.4 G ± 237.3 M  | 19.5 G ± 480.3 M  |
  | 128 MiB        | 9.9 G ± 448.1 M   | N/A              | N/A              | 39.0 G ± 622.8 M  | 19.8 G ± 544.1 M  |
  | 256 MiB        | 9.9 G ± 1.1 G     | N/A              | N/A              | 36.8 G ± 744.3 M  | 17.9 G ± 1.4 G    |
  | 512 MiB        | 9.9 G ± 2.0 G     | N/A              | N/A              | 37.1 G ± 2.1 G    | 17.5 G ± 2.3 G    |

</details>


<details>
  <summary>Latency (us)</summary>

  | Scenario   | CycloneDDS   | Kafka          | MQTT           | Ping         | Zenoh P2P    | Zenoh brokered   | Zenoh-pico P2P (UDP)    |
  |:-----------------|:-------------|:---------------|:---------------|:-------------|:-------------|:-----------------|:------------------------|
  | Single-machine              | 7.9 ± 0.5    | 72.9 ± 15.6   | 27.0 ± 2.7       | 0.9 ± 0.2  | 10.0 ± 0.3  | 21.5 ± 1.4       | 4.9 ± 12.8              |
  | Muti-machine              | 37.8 ± 8.0   | 84.4 ± 18.4    | 45.2 ± 6.0     | 6.7 ± 0.5    | 16.2 ± 0.7   | 40.8 ± 2.4       | 12.7 ± 2.5              |

</details>
